@model IEnumerable<TFI_ADM_RECURSOS_2023.Models.Proyecto>

@{
    ViewData["Title"] = "Index";
}

@using QuestPDF.Fluent;
@using QuestPDF.Helpers;
@using QuestPDF.Infrastructure;
@using QuestPDF.Previewer;


<div>
    <form asp-controller="proyectosReporte" asp-action="BuscarCliente" method="post">
        <div class="form-group">
            <label for="nombreCliente">Nombre del Cliente:</label>
            <input type="text" id="nombreCliente" name="nombreCliente" class="form-control" />
            </n>
            <label for="nombreCliente">Apellido del Cliente:</label>

            <input type="text" id="apellidoCliente" name="apellidoCliente" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">DESCARGAR PDF</button>
    </form>
</div>







<script>
    $(document).ready(function () {
        $('#formularioBusqueda').submit(function (e) {
            e.preventDefault(); // Evitar el envío normal del formulario

            // Realizar la solicitud AJAX
            $.ajax({
                type: "POST",
                url: $(this).attr('action'), // Obtener la URL del formulario
                data: $(this).serialize(), // Serializar los datos del formulario
                success: function (data) {

                    // Verificar si la respuesta contiene un mensaje de error
                    if (data.error) {
                        // Mostrar el mensaje de error en algún lugar de tu página
                        $('#errorText').text(data.error);
                        // Mostrar el modal de error
                        $('#errorModal').modal('show');
                    } else {
                        // Redirigir al usuario a la ubicación del archivo
                        window.location = "/proyectosReporte/BuscarCliente?nombreCliente=" + encodeURIComponent($('#nombreCliente').val());
                    }
                },
                error: function (error) {
                    // Mostrar el mensaje de error en algún lugar de tu página
                    //  $('#errorText').text(data.error);
                    // Mostrar el modal de error
                    //  $('#errorModal').modal('show');
                    console.error("Error en la solicitud AJAX: " + error);
                }


            });
        });
    });

</script>




               